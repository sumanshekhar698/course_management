

# Course Management System - Monitoring & Metrics

This project uses **Spring Boot Actuator** to provide production-ready features that help monitor and manage the application.

## Actuator Endpoints

All management endpoints are prefixed with `/actuator`. Below are the key endpoints available for debugging and learning:

| Endpoint | Method | Purpose | Why it's great for teaching |
| :--- | :--- | :--- | :--- |
| `/actuator` | `GET` | **The "Discovery" page** | Provides a central index of all available management links. |
| `/actuator/health` | `GET` | **App Health Check** | Verifies if the app is "UP" and checks the **MySQL connection** status. |
| `/actuator/mappings` | `GET` | **URL Route Map** | Displays all registered API paths (e.g., `/api/students`) and their controllers. |
| `/actuator/metrics` | `GET` | **Performance Data** | Shows real-time JVM metrics like memory usage, CPU load, and HTTP request counts. |
| `/actuator/beans` | `GET` | **Bean Inventory** | Lists every object (Bean) managed by the **Spring Application Context**. |

# ü©∫ Interpreting Application Health

Spring Boot Actuator provides a real-time "heartbeat" of the application. By visiting `GET http://localhost:8099/actuator/health`, you can diagnose the system's state through its JSON response.

### 1. The "UP" Status (Healthy)
When the application, database, and disk space are all functioning correctly, you will receive a **200 OK** response:



---

## How to use in this project

1. **Port:** The server is configured to run on `http://localhost:8099`.
2. **Access:** You can access these directly in your browser or via Postman.
3. **Configuration:** To see full details (like DB status in the health check), ensure the following is in `application.properties`:
   ```properties
   management.endpoints.web.exposure.include=*
   management.endpoint.health.show-details=always

## API Reference

| Action | Method | URL |
| :--- | :--- | :--- |
| Create Course | `POST` | `/api/courses` |
| Get All Courses | `GET` | `/api/courses` |
| Register Student | `POST` | `/api/students` |
| Enroll Student | `PUT` | `/api/students/{sId}/enroll/{cId}` |
| Get Students by Course | `GET` | `/api/students/course/{title}` |




## Logging & Debugging

This project uses **SLF4J** with **Logback** for system logging.

### Log Levels
You can adjust the logging verbosity in `application.properties`:
- `logging.level.root=INFO`: Standard system info.
- `logging.level.com.example=DEBUG`: Shows your custom logic logs.
- `logging.level.org.hibernate.SQL=DEBUG`: Displays the raw SQL generated by JPA.


### Sample Output
```text
12:45:01  INFO [main] StudentController : Registering new student: Alice
12:45:01 DEBUG [main] org.hibernate.SQL : insert into student (name, city) values (?, ?)
```
### Persistent Logging
By default, this application saves logs to the console. To audit long-running tasks, logs are also saved to a file:

- **Location:** `project_root/logs/course-app.log`
- **Rotation:** Files are archived once they reach 10MB.
- **Retention:** We keep logs for the last 7 days.

> **Tip:** If you are on Linux or Mac, you can watch the log in real-time by running:
> `tail -f logs/course-app.log`

## Understanding Log Levels (The Filter)

Logging levels follow a hierarchy. When you set a level, you see that level **plus everything more severe**.

- **ERROR** üî¥: Only critical failures.
- **WARN** üü†: Potential issues (e.g., "Disk space low").
- **INFO** üü¢: General app flow (Default).
- **DEBUG** üîµ: Detailed info for developers.
- **TRACE** üü£: Every single step (Maximum detail).

**How to read the filter:**
If you set `logging.level.root=WARN`, you will see **WARN** and **ERROR**, but you will **NOT** see INFO or DEBUG.



## Security Configuration

The application is secured using **Spring Security**.

### Credentials (In-Memory)
| Username | Password | Role | Permissions |
| :--- | :--- | :--- | :--- |
| `teacher` | `admin123` | **ADMIN** | Full Access |
| `student` | `pass123` | **USER** | Limited Access |

### Access Rules
- `GET /api/courses/popular`: **Public** (No login required)
- `GET /api/students/**`: **Admin Only**
- All other endpoints: **Authenticated User**

> **Note:** For API testing in Postman/Insomnia, use the **Basic Auth** tab with the credentials above.

### Password Security (BCrypt)

This project avoids the deprecated `withDefaultPasswordEncoder`. Instead, it uses **BCrypt**, a strong adaptive hashing function.

- **Storage:** Passwords are never stored in plain text.
- **Algorithm:** BCrypt (utilizing a Work Factor of 10 by default).
- **Validation:** Spring Security handles the secure comparison of hashes during the authentication handshake.

> **Security Tip:** In a production app, these users would be moved from `InMemoryUserDetailsManager` to a database-backed `JdbcUserDetailsManager`.



## Spring Boot JWT Security Implementation

This repository contains a stateless authentication system using Spring Security and JSON Web Tokens (JWT).

##  Project Components

### Core Classes
* **`JwtUtil.java`**: Utility for generating, parsing, and validating JWT tokens.
* **`JwtAuthenticationFilter.java`**: A per-request filter that extracts the JWT from the header and sets the security context.
* **`AuthRequest.java` & `AuthResponse.java`**: DTOs (Data Transfer Objects) for handling authentication payloads.
* **`User.java`**: The main user entity containing credentials and roles.
* **`UserDao.java`**: Repository interface for database persistence.
* **`CustomUserDetailsService.java`**: Implementation to load user-specific data during authentication.
* **`AuthController.java`**: REST controller for registration and login endpoints.

### Configuration Files
* **`pom.xml`**: Includes `jjwt` (version 0.12.6) dependencies.
* **`SecurityConfig.java`**: Defines the security filter chain, password encoders, and stateless session management.
* **`application.properties`**: Contains the JWT secret key and expiration settings.

---

### ‚öôÔ∏è Configuration Details

| Property | Value |
| :--- | :--- |
| **JWT Secret** | 256-bit secret key (Change for Production) |
| **JWT Expiration** | 24 Hours (86,400,000 ms) |
| **Auth Header** | `Authorization: Bearer <token>` |
| **Session Policy** | `SessionCreationPolicy.STATELESS` |

---

###  Security Rules

| Endpoint Path | Access Requirement |
| :--- | :--- |
| `/api/auth/**` | **Permit All** (Public) |
| `/api/courses/popular` | **Permit All** (Public) |
| `/api/students/**` | **ROLE_ADMIN** |
| `/**` (All others) | **Authenticated** |

---

###  API Usage Guide

#### 1. Register a New User
**Endpoint:** `POST /api/auth/register`  
**Payload:**
```json
{
  "username": "user1",
  "password": "pass123"
}